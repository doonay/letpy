Каталог товаров в json #162
В этом уроке нужно в очередной раз переделать программу с каталогом товаров. На этот раз вместо сохранения и чтения данных в формате csv, нужно будет сделать хранение и чтение в формате json.

Помните, что результат работы json.dumps — это строка и ее можно сохранить в файл с помощью метода write. А строку, которую нужно будет передать в json.loads можно получить, прочитав ее из файла с помощью read.



Наше решение
import json

with open('catalog.json', 'r') as f:
    # json -- текстовый формат, мы можем прочитать все содержимое
    # файла в переменную и сразу преобразовать с помощью json.loads
    content = f.read()
    catalog = json.loads(content)

for i in range(3):
    name = input('Введите наименование товара')
    count = int(input('Введите количество товара'))
    # если ключ (наименование товара) уже есть
    # в словаре
    if name in catalog:
        # увеличиваем его значение на count
        catalog[name] += count
    else:
        # иначе создаем ключ со значением count 
        catalog[name] = count

with open('catalog.json', 'w') as f:
    # записываем все строку, полученную с помощью 
    # json.dumps в файл
    content = json.dumps(catalog)
    f.write(content)