Каталог товаров в формате csv #157
В этом уроке нужно будет усовершенствовать программу из урока «Чтение данных для каталога». Чтение и запись в файл должны быть сделаны с помощью модуля csv.


Наше решение
import csv

catalog = {}

with open('catalog.csv', 'r') as f:
    # читаем файл csv построчно и сразу распаковываем
    # каждую строку в две переменных
    for name, count in csv.reader(f):
        catalog[name] = int(count)

for i in range(3):
    name = input('Введите наименование товара')
    count = int(input('Введите количество товара'))
    # если ключ (наименование товара) уже есть
    # в словаре
    if name in catalog:
        # увеличиваем его значение на count
        catalog[name] += count
    else:
        # иначе создаем ключ со значением count 
        catalog[name] = count

# Каждый ключ и значение в каталоге нужно 
# записать в файл. Метод словаря items
# возвращает пару ключ-значение в виде кортежа,
# а это как раз подходит нам для записи строки csv

with open('catalog.csv', 'w') as f:
    writer = csv.writer(f)
    for row in catalog.items():
        writer.writerow(row)